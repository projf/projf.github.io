<!doctype html><html class="not-ready lg:text-base" style=--bg:#fff lang=en-gb><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>News: April 2023 - Project F</title>
<meta name=theme-color><meta name=description content="Welcome to the latest Project F news covering the first part of 2023. In this edition, we sail the sea of chaos, round out division, automate Vivado with Tcl, and uncover openFPGALoader and cocotb."><meta name=author content="Will Green"><link rel="preload stylesheet" as=style href=https://projectf.io/main.min.css><link rel=preload as=image href=https://projectf.io/theme.png><link rel=preload as=image href=https://projectf.io/twitter.svg><link rel=preload as=image href=https://projectf.io/github.svg><link rel=preload as=image href=https://projectf.io/mastodon.svg><link rel=preload as=image href=https://projectf.io/rss.svg><script defer src=https://projectf.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://projectf.io/favicon.ico><link rel=apple-touch-icon href=https://projectf.io/apple-touch-icon.png><meta name=generator content="Hugo 0.127.0"><script src=https://cdn-eu.usefathom.com/script.js data-site=EVCGKVDN defer></script><meta itemprop=name content="News: April 2023"><meta itemprop=description content="Welcome to the latest Project F news covering the first part of 2023. In this edition, we sail the sea of chaos, round out division, automate Vivado with Tcl, and uncover openFPGALoader and cocotb."><meta itemprop=datePublished content="2023-04-29T00:00:00+00:00"><meta itemprop=dateModified content="2023-04-29T00:00:00+00:00"><meta itemprop=wordCount content="1000"><meta itemprop=image content="https://projectf.io/img/posts/news/news-2023-04-social-card.png"><meta itemprop=keywords content="News"><meta property="og:url" content="https://projectf.io/posts/news-2023-04/"><meta property="og:site_name" content="Project F"><meta property="og:title" content="News: April 2023"><meta property="og:description" content="Welcome to the latest Project F news covering the first part of 2023. In this edition, we sail the sea of chaos, round out division, automate Vivado with Tcl, and uncover openFPGALoader and cocotb."><meta property="og:locale" content="en_gb"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-29T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-29T00:00:00+00:00"><meta property="article:tag" content="News"><meta property="og:image" content="https://projectf.io/img/posts/news/news-2023-04-social-card.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://projectf.io/img/posts/news/news-2023-04-social-card.png"><meta name=twitter:title content="News: April 2023"><meta name=twitter:description content="Welcome to the latest Project F news covering the first part of 2023. In this edition, we sail the sea of chaos, round out division, automate Vivado with Tcl, and uncover openFPGALoader and cocotb."><link rel=canonical href=https://projectf.io/posts/news-2023-04/></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[4.5rem] max-w-4xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://projectf.io/>Project F</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg="#fff".replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>About</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/demos/>Demos</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/verilog-lib/>Lib</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tools/>Tools</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tutorials/>Tutorials</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/@WillFlux target=_blank rel=me>twitter
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/projf target=_blank rel=me>github
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./mastodon.svg) href=https://mastodon.social/@WillFlux target=_blank rel=me>mastodon
</a><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://projectf.io/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-4xl px-8 pb-4 pt-4 dark:prose-invert"><article><header class=mb-4><h1 class="!my-0 pb-2.5">News: April 2023</h1><div class="text-sm antialiased opacity-60">Published
<time>29 Apr 2023</time></div></header><section><p>Welcome to the latest Project F news covering the first part of 2023. In this edition, we sail the sea of chaos, round out division, automate Vivado with Tcl, and uncover openFPGALoader and cocotb.</p><p>Have a question or suggestion? Contact <a href=https://mastodon.social/@WillFlux>@WillFlux</a> or join me on <a href=https://github.com/projf/projf-explore/discussions>Project F Discussions</a> or <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a>. If you like what I do, consider <a href=https://github.com/sponsors/WillGreen>sponsoring me</a> on GitHub. Thank you.</p><p><em>The next news instalment will appear later in 2023.</em></p><h2 id=fractal-fpga>Fractal FPGA</h2><p>I&rsquo;ve been experimenting with fractals to test my maths designs. In March, I posted <a href=/posts/mandelbrot-verilog/>Mandelbrot</a> using fixed-point maths and a small framebuffer to render the Mandelbrot set.</p><p>The multiplication module could use some optimisation, and we only consider one pixel at a time, but it&rsquo;s still a fun little demo to try on your dev board (or in simulation).</p><p><a href=https://github.com/projf/projf-explore/tree/main/demos/mandelbrot>Mandelbrot Verilog source and build instructions</a> (GitHub)</p><p><img src=/img/posts/mandelbrot-verilog/mandel-zoom-supersample.png alt="Supersampled Mandelbrot render" title=Smooth...></p><h2 id=divided-we-stand>Divided We Stand</h2><p>In January, I designed a new fixed-point division module with Gaussian rounding. Better rounding is important for many algorithms and adds negligible overhead to a simple division module. Read more in <a href=/posts/division-in-verilog>Division in Verilog</a>.</p><p>I used <a href=https://docs.cocotb.org/en/latest/>cocotb</a> for the first time in testing my new module. cocotb is a Python-based testing tool that works with existing simulators, such as Icarus Verilog. I found cocotb to be a productive testing tool, if a little frustrating at first. I intend to write about cocotb when I have more experience with it.</p><p>Here&rsquo;s an example of a division test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@cocotb.test</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>round_8</span>(dut):  <span style=color:#75715e># negative</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Test -7.0625/2&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> test_dut_divide(dut<span style=color:#f92672>=</span>dut, a<span style=color:#f92672>=-</span><span style=color:#ae81ff>7.0625</span>, b<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>)
</span></span></code></pre></div><p>And the test output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>   367.02ns INFO     cocotb.regression      running round_8 <span style=color:#f92672>(</span>17/32<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                              Test -7.0625/2
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div             dut a:     <span style=color:#ae81ff>110001111</span>
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div             dut b:     <span style=color:#ae81ff>000100000</span>
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div             dut val:   <span style=color:#ae81ff>111001000</span>
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div                        -3.5
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div             model val: 111100.1000
</span></span><span style=display:flex><span>   389.02ns INFO     cocotb.div                        -3.5
</span></span><span style=display:flex><span>   390.02ns INFO     cocotb.regression      round_8 passed
</span></span></code></pre></div><p>You can see the full source of the division test in git: <a href=https://github.com/projf/projf-explore/blob/main/lib/maths/test/div.py>lib/maths/test/div.py</a></p><h2 id=tickling-vivado>Tickling Vivado</h2><p>Vivado is de rigour for working with Xilinx FPGAs but can be an unforgiving beast. Vivado is built around Tcl scripting, which deterred me from automating things when I first got an Arty board in 2018. However, experience has taught me that simple Tcl scripting is helpful and not difficult. In my latest blog post, I aim to show you how straightforward a Tcl script can be: <a href=/posts/vivado-tcl-build-script>Vivado Tcl Build Script</a></p><h2 id=bits-and-pieces>Bits and Pieces</h2><h3 id=project-f-discussion-forum>Project F Discussion Forum</h3><p>Several people requested I open a <a href=https://github.com/projf/projf-explore/discussions>Project F discussion forum on GitHub</a>, which I did in February. Pop on over with your question or suggestion on any Project F design. You can also find me on <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a> if that&rsquo;s more your thing.</p><h3 id=better-blanking>Better Blanking</h3><p>One fruitful discussion was <a href=https://github.com/projf/projf-explore/discussions/139>Improving the Colour Test code for analog VGA</a> that led me to improve the video blanking design:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#75715e>// display colour: paint colour but black in blanking interval
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>logic</span> [CHANW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] display_r, display_g, display_b;
</span></span><span style=display:flex><span><span style=color:#66d9ef>always_comb</span> {display_r, display_g, display_b} <span style=color:#f92672>=</span> (de) <span style=color:#f92672>?</span> {paint_r, paint_g, paint_b} <span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>;
</span></span></code></pre></div><p>I&rsquo;d previously had different, ad-hoc logic to cover colour in the blanking interval, which allowed annoying bugs to creep in. The new design ensures the colour is always black in the blanking interval.</p><h3 id=openfpgaloader>openFPGALoader</h3><p>This year, I&rsquo;ve started using <a href=https://trabucayre.github.io/openFPGALoader/>openFPGALoader</a> to program my FPGA dev boards. openFPGALoader supports a wide range of FPGAs, dev boards, and cables and is available in the <a href=https://github.com/YosysHQ/oss-cad-suite-build>OSS CAD Suite</a>.</p><p>I&rsquo;ve liked building a Vivado project on a remote machine and programming a Xilinx dev board locally with openFPGALoader, even from a Mac.</p><h3 id=new-blog-design>New Blog Design</h3><p>As you&rsquo;ve probably noticed, the Project F blog has a clean new look. Overly-thin body text is out; chunkier design is in. Plus, there&rsquo;s better mobile scaling and dark mode for those late-night design sessions. The blog remains free from adverts and cookies.</p><h3 id=outside-interests-revision>Outside Interests: Revision</h3><p><img src=/img/posts/news/revision2023.jpeg alt="Revision Invite" title="We are back!"></p><p>The Revision demo party was <a href="https://www.youtube.com/watch?v=WzI3Kqr8dNI">back at E-Werk</a> for 2023.</p><p>My favourite Amiga prods:</p><ul><li><a href="https://www.pouet.net/prod.php?which=94136">Electric Lifeforms</a> [<a href="https://www.youtube.com/watch?v=UX5JQ1I_6ZY&amp;t=1663s">YouTube</a>] (Amiga 64K Intro)</li><li><a href="https://www.pouet.net/prod.php?which=94132">Neocolora by Darkage & Lemon</a> [<a href="https://youtu.be/n95gUdRwGRA?t=1961">YouTube</a>] (Amiga Demo)</li><li><a href="https://www.pouet.net/prod.php?which=94129">Cycle-Op by Oxygene</a> [<a href="https://youtu.be/n95gUdRwGRA?t=862">YouTube</a>] (Amiga Demo)</li></ul><p>YouTube playlist for all the compos: <a href="https://www.youtube.com/playlist?list=PLNqQO7lFY6dkAvrJRfO_F1d7tpecTPxEJ">Revision 2023 - Compos</a></p><p>I didn&rsquo;t enter an FPGA demo this year, but maybe I&rsquo;ll be back in in 2024? ;)</p><h2 id=whats-next>What&rsquo;s Next?</h2><p>I&rsquo;ll continue improving my existing designs and blog posts throughout 2023 but plan to focus on two new areas: video capture and a new FPGA series.</p><h3 id=video-capture>Video Capture</h3><p>Thanks to my <a href=https://github.com/sponsors/WillGreen>lovely sponsors</a>, I have a shiny new Blackmagic UltraStudio Recorder 3G. This small box lets me capture smooth, high-quality DVI and HDMI output from FPGA dev boards.</p><p>The Blackmagic doesn&rsquo;t support 640x480, which has given me the kick I needed to add 1280x720 versions of the <a href=/tutorials/#graphics>FPGA Graphics</a> series. I&rsquo;ve merged 5 of 9 designs for <a href=https://github.com/projf/projf-explore/tree/main/graphics>Nexys Video in git</a> and will finish the remainder soon. Once the whole series is in place, I&rsquo;ll upload videos to YouTube.</p><p>Video is one of the best ways to explain hardware design, so I plan to make video capture a regular part of my designs in future. Subscribe to the <a href=https://www.youtube.com/@projf>Project F YouTube Channel</a> and stay tuned.</p><p><img src=/img/posts/news/blackmagic-ultrastudio-recorder-3g.jpeg alt="Blackmagic UltraStudio Recorder 3G" title="Capture the magic."></p><h3 id=new-fpga-series>New FPGA Series</h3><p>I&rsquo;ve started work on a new FPGA series but am not ready to reveal it yet. Rest assured, the new series will stick to the Project F philosophy of accessible open-source FPGA designs.</p><p>Why the new approach? With the graphics and maths series, I&rsquo;ve completely revised the designs and blog posts several times. For this next series, I plan to complete an initial version of the designs before going public. That way, I can take a more holistic approach to the designs and blog writing.</p><h2 id=thank-you-sponsors>Thank You, Sponsors!</h2><p>Thank you to my sponsors for supporting my work on Project F: <a href=https://github.com/dcnorris>David C. Norris</a>, <a href=https://github.com/DidierMalenfant>Didier Malenfan</a>, <a href=https://github.com/mrdoornbos>Michael Doornbos</a>, <a href=https://github.com/kromych>kromych</a>, <a href=https://github.com/LaDirth>LaDirth</a>, <a href=https://github.com/mattvenn>matt venn</a>, <a href=https://github.com/sajattack>Paul Sajna</a>, <a href=https://github.com/STjurny>STjurny</a>, and those who wish to remain anonymous.</p><p>If you like what I do, consider joining them and <a href=https://github.com/sponsors/WillGreen>sponsoring me</a> on GitHub. I love FPGAs and want to help more people discover and use them in their projects.</p><p><em>This is the latest news post, but you can always browse the <a href=/tags/news/>news archive</a>.</em></p></section><footer class="mt-12 flex flex-wrap"><a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/news>news</a></footer></article></main><footer class="opaco mx-auto flex h-[4.5rem] max-w-4xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto><a class=link href=https://projectf.io/>Project F</a>: A little oasis for FPGA and RISC-V design.
&copy; 2024 Will Green.</div></footer></body></html>