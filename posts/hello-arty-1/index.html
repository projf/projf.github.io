<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#fff lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Hello Arty - Part 1 - Project F</title><meta name=theme-color><meta name=description content="This three-part tutorial provides a quick introduction to FPGA development with SystemVerilog and the Digilent Arty A7 board. No prior experience of FPGA development is required, but basic knowledge of programming concepts is assumed. If you can write a simple program with Python or JavaScript, you shouldn&rsquo;t have any trouble.
I find working with FPGAs gives me a sense of delight so often lacking in modern software development. There&rsquo;s something profoundly satisfying about designing at the hardware level, be it drawing graphics on a screen, producing sound from a speaker, or even implementing your own CPU from scratch."><meta name=author content="Will Green"><link rel="preload stylesheet" as=style href=https://projectf.io/main.min.css><script defer src=https://projectf.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://projectf.io/theme.png><link rel=preload as=image href=https://projectf.io/github.svg><link rel=preload as=image href=https://projectf.io/mastodon.svg><link rel=preload as=image href=https://projectf.io/rss.svg><link rel=icon href=https://projectf.io/favicon.ico><link rel=apple-touch-icon href=https://projectf.io/apple-touch-icon.png><meta name=generator content="Hugo 0.110.0"><script src=https://badgers.projectf.io/script.js data-site=EVCGKVDN defer></script><meta property="og:title" content="Hello Arty - Part 1"><meta property="og:description" content="This three-part tutorial provides a quick introduction to FPGA development with SystemVerilog and the Digilent Arty A7 board. No prior experience of FPGA development is required, but basic knowledge of programming concepts is assumed. If you can write a simple program with Python or JavaScript, you shouldn&rsquo;t have any trouble.
I find working with FPGAs gives me a sense of delight so often lacking in modern software development. There&rsquo;s something profoundly satisfying about designing at the hardware level, be it drawing graphics on a screen, producing sound from a speaker, or even implementing your own CPU from scratch."><meta property="og:type" content="article"><meta property="og:url" content="https://projectf.io/posts/hello-arty-1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-04-24T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-28T00:00:00+00:00"><meta itemprop=name content="Hello Arty - Part 1"><meta itemprop=description content="This three-part tutorial provides a quick introduction to FPGA development with SystemVerilog and the Digilent Arty A7 board. No prior experience of FPGA development is required, but basic knowledge of programming concepts is assumed. If you can write a simple program with Python or JavaScript, you shouldn&rsquo;t have any trouble.
I find working with FPGAs gives me a sense of delight so often lacking in modern software development. There&rsquo;s something profoundly satisfying about designing at the hardware level, be it drawing graphics on a screen, producing sound from a speaker, or even implementing your own CPU from scratch."><meta itemprop=datePublished content="2020-04-24T00:00:00+00:00"><meta itemprop=dateModified content="2021-06-28T00:00:00+00:00"><meta itemprop=wordCount content="2334"><meta itemprop=keywords content="arty-a7,hello,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hello Arty - Part 1"><meta name=twitter:description content="This three-part tutorial provides a quick introduction to FPGA development with SystemVerilog and the Digilent Arty A7 board. No prior experience of FPGA development is required, but basic knowledge of programming concepts is assumed. If you can write a simple program with Python or JavaScript, you shouldn&rsquo;t have any trouble.
I find working with FPGAs gives me a sense of delight so often lacking in modern software development. There&rsquo;s something profoundly satisfying about designing at the hardware level, be it drawing graphics on a screen, producing sound from a speaker, or even implementing your own CPU from scratch."></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href=https://projectf.io/>Project F</a><div class="btn-dark text-[0] ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#fff"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>About</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/demos/>Demos</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/verilog-lib/>Lib</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tools/>Tools</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tutorials/>Tutorials</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/projf target=_blank rel=me>github</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./mastodon.svg) href=https://mastodon.social/@WillFlux target=_blank rel=me>mastodon</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://projectf.io/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-1 dark:prose-invert"><article><header class=mb-1><h1 class="!my-0 pb-2.5">Hello Arty - Part 1</h1><div class="text-sm opacity-60">Published
<time>24 Apr 2020</time>
<span class=mx-1>&#183;</span>
<span>Updated
<time>28 Jun 2021</time></span></div></header><section><p>This three-part tutorial provides a quick introduction to FPGA development with <strong>SystemVerilog</strong> and the <strong>Digilent Arty A7</strong> board. No prior experience of FPGA development is required, but basic knowledge of programming concepts is assumed. If you can write a simple program with Python or JavaScript, you shouldn&rsquo;t have any trouble.</p><p>I find working with FPGAs gives me a sense of delight so often lacking in modern software development. There&rsquo;s something profoundly satisfying about designing at the hardware level, be it drawing graphics on a screen, producing sound from a speaker, or even implementing your own CPU from scratch. I hope you find this tutorial helpful and have fun with FPGAs. This series is also available for the <strong><a href=/posts/hello-nexys-1/>Nexys Video</a></strong>.</p><p>Already completed part 1? Jump to <strong><a href=/posts/hello-arty-2/>part 2</a></strong>.</p><p><em>Get in touch with <a href=https://mastodon.social/@WillFlux>@WillFlux</a> or join me on <a href=https://github.com/projf/projf-explore/discussions>GitHub Discussions</a> and <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a>.</em></p><blockquote><p>People who are really serious about software should make their own hardware.<br><em>Alan Kay, <a href="https://www.folklore.org/StoryView.py?project=Macintosh&story=Creative_Think.txt">Creative Think seminar</a> (1982)</em></p></blockquote><h3 id=requirements>Requirements</h3><p>For this series, we are using the <a href=https://reference.digilentinc.com/reference/programmable-logic/arty-a7/start>Digilent Arty A7-35T</a>, a $130 dev board based on a <a href=https://www.xilinx.com/products/silicon-devices/fpga/artix-7.html>Xilinx Artix-7 FPGA</a>. This board is widely available and supports Xilinx&rsquo;s Vivado software, which runs on Linux and Windows.</p><p>For this <em>Hello Arty</em> series you need:</p><ol><li><a href=https://reference.digilentinc.com/reference/programmable-logic/arty-a7/start>Digilent Arty A7-35T</a></li><li>Micro USB cable to program and power the Arty</li><li>Xilinx Vivado 2019 or later: <a href=https://www.xilinx.com/support/download.html>Download</a> and <a href="https://www.xilinx.com/support/documentation-navigation/see-all-versions.html?xlnxproducttypes=Design%20Tools&xlnxdocumentid=UG973">Install Guide</a></li><li><a href=https://reference.digilentinc.com/vivado/installing-vivado/start#installing_digilent_board_files>Digilent board files</a></li></ol><p><em>NB. The original Arty (without the A7) is the same as the Arty A7-35T, so you can use that too.</em></p><h3 id=source>Source</h3><p>The SystemVerilog designs featured in this series are available from the <a href=https://github.com/projf/projf-explore/tree/main/hello>projf-explore</a> git repo under the open-source MIT licence: build on them to your heart&rsquo;s content. The rest of the blog content is subject to standard copyright restrictions: don&rsquo;t republish it without permission.</p><h2 id=hello-world-with-systemverilog--vivado>Hello World with SystemVerilog & Vivado</h2><p>We&rsquo;re going to start with the traditional dev board &ldquo;hello, world&rdquo;: using simple logic to control the green LEDs on our board. In <a href=/posts/hello-arty-2/>part 2</a> we move onto clocks, counting, and pulse width modulation.</p><h3 id=terminology>Terminology</h3><p>Before we dive into creating our first project, I should explain a couple of terms:</p><ul><li><strong>SystemVerilog</strong> is a hardware description language (<strong>HDL</strong>) that allows you to express your design at a (reasonably) high level instead of directly describing logic gates (AND, OR, NOT). This is roughly analogous to how C lets you express your software design at a higher level than assembly language. Other HDLs include <a href=https://en.wikipedia.org/wiki/VHDL>VHDL</a>, <a href=https://spinalhdl.github.io/SpinalDoc-RTD/>SpinalHDL</a>, and <a href=https://github.com/nmigen/nmigen>nMigen</a>.</li><li><strong>Vivado</strong> is the FPGA development suite from <strong>Xilinx</strong>. It includes everything you need to write SystemVerilog and program a Xilinx FPGA. There&rsquo;s no getting around the fact it&rsquo;s a monster, requiring around 20 GiB of disk space. Thankfully it has a no-cost version and is reasonably intuitive once you&rsquo;ve played with it for a little while. Vivado is available for Windows and Linux (Ubuntu RHEL/CentOS, & SUSE), but not for macOS.</li></ul><h3 id=the-arty-board>The Arty Board</h3><p><img src=/img/posts/hello-arty/arty-board.jpg alt="Arty Board" title="Arty Board with A7-35T FPGA"></p><p>In this part, we&rsquo;re interested in the four green LEDs (<strong><code>LD4-7</code></strong>), four slide switches (<strong><code>SW0-3</code></strong>), and four push buttons (<strong><code>BTN0-3</code></strong>). You can see these towards the bottom of the board in the above photo. The FPGA itself is the square chip in the middle of the board labelled &ldquo;Artix-7&rdquo;.</p><h2 id=hello-world-project>Hello World Project</h2><p>For our first SystemVerilog, we&rsquo;re going to use a switch to turn an LED off and on. We then extend this to cover multiple LEDs, switches, and buttons.</p><h3 id=creating-a-project>Creating a Project</h3><ol><li>Start Vivado.</li><li>Select &ldquo;Create Project&rdquo; under &ldquo;Quick Start&rdquo;.</li><li>Project name: <strong><code>hello-arty-1</code></strong> and make sure &ldquo;Create project subdirectory&rdquo; is selected.</li><li>Project Type: &ldquo;RTL Project&rdquo; and make sure &ldquo;Do not specify sources at this time&rdquo; is selected.</li><li>Default Part: Select &ldquo;Boards&rdquo; then choose &ldquo;Arty A7-35&rdquo;.<br>If it&rsquo;s not on the list, you need to quit Vivado and install the <a href=https://reference.digilentinc.com/vivado/installing-vivado/start#installing_digilent_board_files>board files</a>.</li><li>Review the &ldquo;New Project Summary&rdquo; and hit &ldquo;Finish&rdquo;.</li></ol><p><em>If you&rsquo;re using the original Arty (without the A7) you should select &lsquo;Arty&rsquo; in step 5.</em></p><h3 id=hello-systemverilog>Hello SystemVerilog</h3><ol><li>In the top left of the Vivado window, under &ldquo;Project Manager&rdquo;, select &ldquo;Add Sources&rdquo;.</li><li>Choose &ldquo;Add or create design sources&rdquo; and click &ldquo;Next&rdquo;.</li><li>Select &ldquo;Create File&rdquo; in the middle of the dialog.</li><li>Make sure File type is set to &ldquo;SystemVerilog&rdquo; and name the file <code>top.sv</code> then click &ldquo;Finish&rdquo;.</li><li>In the &ldquo;Define Module&rdquo; dialog hit &ldquo;OK&rdquo; then click &ldquo;Yes&rdquo; when prompted.</li></ol><p>Replace the contents of the top module in <code>top.sv</code> with <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/A/top.sv>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> top (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span> <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> sw,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>output</span>     <span style=color:#66d9ef>logic</span> led
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        led <span style=color:#f92672>=</span> sw;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>The first part of the module defines our inputs and outputs:</p><ul><li><strong><code>sw</code></strong> - one of the four slide switches (labelled <strong><code>SW0</code></strong> on the PCB)</li><li><strong><code>led</code></strong> - one of the green LEDs (labelled <strong><code>LD4</code></strong> on the PCB)</li></ul><p>The second part of the module is where we write our logic. In this case, we wire up <code>led</code> to <code>sw</code>: when the switch is on the LED is on, when the switch is off the LED is off. Don&rsquo;t worry about the meaning of <code>always_comb</code> for now; we&rsquo;ll come back to that in part 2.</p><p>Save your file by hitting <strong><code>Ctrl-S</code></strong> or by using the save button at the top left of the editor window (yes, it still looks like a floppy disk).</p><p><em>ProTip: You can use <strong><code>Ctrl+/</code></strong> to (un)comment the current line in the Vivado editor window.</em></p><blockquote><p><strong>Direct Connection</strong><br>You wouldn&rsquo;t normally directly connect a switch to an LED like this.
However, it&rsquo;s good to be able to work with real hardware right away, so we&rsquo;ve taken some liberties.
In <a href=/posts/hello-arty-2/>part 2</a> we&rsquo;ll store the LED state in a flip-flop.</p></blockquote><h3 id=constraints-file>Constraints File</h3><p>An FPGA is very flexible; you can connect many different types of inputs and outputs to the many hundreds of pins. Before synthesising our code, we need to tell Vivado how our Arty board is wired up. Vivado uses <strong>constraints</strong> to map an input or output, such as <strong><code>led</code></strong>, to the appropriate pin.</p><ol><li>In the top left of the Vivado window, select &ldquo;Add Sources&rdquo; under &ldquo;Project Manager&rdquo;.</li><li>Choose &ldquo;Add or create constraints&rdquo; and click &ldquo;Next&rdquo;.</li><li>Select &ldquo;Create File&rdquo; in the middle of the dialog.</li><li>Make sure File type is set to &ldquo;XDC&rdquo; and name the file <code>arty.xdc</code> then click &ldquo;Finish&rdquo;.</li></ol><p>Select <code>arty.xdc</code> in the editor window, add the following <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/A/arty.xdc>src</a>]</strong> content then save the file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tcl data-lang=tcl><span style=display:flex><span><span style=color:#75715e>## FPGA Configuration I/O Options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property CONFIG_VOLTAGE <span style=color:#ae81ff>3.3</span> <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>set_property CFGBVS VCCO <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># I/O Pins
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN A8  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN H5  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>}];</span>
</span></span></code></pre></div><p><em>ProTip: These constraints are written in <a href=https://en.wikipedia.org/wiki/Tcl>Tcl</a>, which is used throughout Vivado.</em></p><h3 id=design-to-board>Design to Board</h3><p>To bring our design to life on the Arty board, we need to go through four steps:</p><ol><li><strong>Synthesis</strong> - convert the SystemVerilog into logic gates</li><li><strong>Implementation</strong> - optimise and lay out the logic for the target FPGA</li><li><strong>Generate Bitstream</strong> - generate the FPGA bitstream file from the implementation</li><li><strong>Program Device</strong> - load the bitstream into the FPGA</li></ol><p>Even on a fast PC, this whole process can take a few minutes, so be patient.</p><ol><li>Click the green play button at the top of the Vivado screen.</li><li>Select &ldquo;Run Synthesis&rdquo;.<br>If a &ldquo;Launch Runs&rdquo; dialog appears then just select &ldquo;OK&rdquo;.<br>You&rsquo;ll see a message &ldquo;Running synth_design&rdquo; at the top-right of Vivado.</li><li>A dialog appears prompting you to &ldquo;Run Implementation&rdquo;.<br>Click &ldquo;OK&rdquo; to start implementation.</li><li>A dialog appears saying &ldquo;Implementation successfully completed&rdquo;.<br>Select &ldquo;Generate Bitstream&rdquo; and click &ldquo;OK&rdquo;.</li><li>A dialog appears saying &ldquo;Bitstream Generation successfully completed&rdquo;.<br>Select &ldquo;Open Hardware Manager&rdquo; and click &ldquo;OK&rdquo;.</li></ol><p>If you accidentally close any step you can find commands to run the different stages on the left-hand side of the Vivado window.</p><h3 id=hardware-manager>Hardware Manager</h3><ol><li>Connect your Arty board to your PC using a micro USB cable.</li><li>At the bottom left of Vivado select &ldquo;Open Target&rdquo; under &ldquo;Open Hardware Manager&rdquo;.</li><li>Choose &ldquo;Auto Connect&rdquo; from the menu. If this fails, try again, it can be temperamental.</li><li>Select &ldquo;Program Device&rdquo; under &ldquo;Open Hardware Manager&rdquo;.</li><li>There should be one option &ldquo;xc7a35t_0&rdquo;; this is your Arty board.</li><li>Browse to your bitstream file <code>hello-arty-1/hello-arty-1.runs/impl_1/top.bit</code>.</li><li>Click &ldquo;Program&rdquo;.</li></ol><p><em>If you&rsquo;re on Linux and hardware manager never connects then you may have forgotten to <a href=#requirements>install the cable drivers</a>.</em></p><h3 id=hello-led>Hello LED</h3><p>Slide the switch <strong><code>SW0</code></strong> on and off on your board to control green LED <strong><code>LD4</code></strong>.</p><p><img src=/img/posts/hello-arty/hello-led.jpg alt="LED on!" title="Arty board showing SW0 and LD4 on."></p><p>This functionality isn&rsquo;t anything you couldn&rsquo;t trivially achieve with a microcontroller. However, it&rsquo;s worth pausing to think about what you&rsquo;ve done here. You&rsquo;ve created a simple circuit board within the FPGA. There is no CPU running code here: it&rsquo;s as if you&rsquo;d wired up the switch to the LED on a breadboard.</p><h2 id=moar-switches-moar-leds>Moar Switches, Moar LEDs!</h2><p>You didn&rsquo;t buy an FPGA to emulate a single wire on a breadboard; let&rsquo;s extend our design so that one switch can control two LEDs. Granted you didn&rsquo;t buy an FPGA board to do that either, but it does at least involve some logic!</p><p><em>If you&rsquo;re still in Hardware Manager; you can get back to your Verilog source code by selecting &ldquo;Project Manager&rdquo; at the top left of the Vivado window.</em></p><p>Replace the existing top module in <code>top.sv</code> with the following <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/B/top.sv>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> top (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span> <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] sw,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>output</span>     <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] led
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (sw[<span style=color:#ae81ff>0</span>]) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b11</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b00</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (sw[<span style=color:#ae81ff>1</span>]) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b11</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b00</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p><strong><code>2'b</code></strong> defines a 2-bit binary literal: we have two LEDs each expecting a signal, so a two-bit value is appropriate here. You use d for decimal literals, and h for hexadecimal literals:</p><ul><li><code>2'b11</code> - 2 bits with value 11<sub>2</sub> (decimal 3)</li><li><code>4'd5</code> - 4 bits with value 5</li><li><code>8'h5E</code> - 8 bits with value 5E<sub>16</sub> (decimal 94)</li><li><code>15'h7FF</code> - 15 bits with value 7FF<sub>16</sub> (decimal 2,047)</li></ul><p>You can also see how we&rsquo;ve referred to multiple LEDs: <strong><code>led[1:0]</code></strong> includes both <strong><code>led[0]</code></strong> and <strong><code>led[1]</code></strong>.</p><p>We&rsquo;re added a switch and three LEDs to our design, but we haven&rsquo;t defined them in our constraints file; Vivado won&rsquo;t know what to connect them to. Open up <code>arty.xdc</code> and replace it with <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/B/arty.xdc>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tcl data-lang=tcl><span style=display:flex><span><span style=color:#75715e>## FPGA Configuration I/O Options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property CONFIG_VOLTAGE <span style=color:#ae81ff>3.3</span> <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>set_property CFGBVS VCCO <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Slide Switches
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN A8  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>0<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN C11 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>1<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## LEDs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN H5  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>0<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN J5  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>1<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN T9  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>2<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN T10 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>3<span style=color:#66d9ef>]}];</span>
</span></span></code></pre></div><p>Rerun synthesis, implementation, bitstream generation, and program the board as before. You should be able to control two LEDs with each of the first two slide switches.</p><h2 id=conditional-love>Conditional Love</h2><p>Those if blocks can get annoying fast, plus bad things happen if you don&rsquo;t provide a value for all possible outcomes (latches: yuuurgh). Verilog has an answer for this with the every-handy <strong>conditional operator</strong> <code>condition ? value_if_true : value_if_false;</code></p><p>The easiest way to understand it is to see it in action; replace <code>top.sv</code> with the following <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/C/top.sv>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> top (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span> <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] sw,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>output</span>     <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] led
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        led[<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> sw[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>?</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b11</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b00</span>;
</span></span><span style=display:flex><span>        led[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> sw[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>?</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b11</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;b00</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>Go through the usual rigmarole of synthesis, implementation, bitstream generation, and programming your board. It should work as before, but I think you&rsquo;ll agree the conditional operator makes this design simpler to write and understand.</p><h2 id=smooth-operator>Smooth Operator</h2><p>We can expand our conditional expressions with logical operators:</p><ul><li><strong>&&</strong> - logical AND</li><li><strong>||</strong> - logical OR</li><li><strong>!</strong> - logical NOT (or negation)</li></ul><p>These work as you&rsquo;d expect from software development; for example:<br><code>A && B</code> is true if both <code>A</code> and <code>B</code> are true.</p><p>These <em>logical operators</em> are not to be confused with <em>bitwise operators</em>, such as a single <code>&</code>, which operate on the individual bits of a value. We&rsquo;ll encounter bitwise operators in later tutorials.</p><p>For now let&rsquo;s test two switches with the logical AND operator and add a push button <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/D/top.sv>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> top (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span> <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] sw,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span> <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] btn,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>output</span>     <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] led
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (sw[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> sw[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> btn[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>?</span> <span style=color:#ae81ff>4</span><span style=color:#ae81ff>&#39;b1001</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span><span style=color:#ae81ff>&#39;b0110</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            led[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span><span style=color:#ae81ff>&#39;b0000</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>We don&rsquo;t have push buttons in our constraints; let&rsquo;s add them and the other slide switches <strong>[<a href=https://github.com/projf/projf-explore/blob/main/hello/hello-arty/D/arty.xdc>src</a>]</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tcl data-lang=tcl><span style=display:flex><span><span style=color:#75715e>## FPGA Configuration I/O Options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property CONFIG_VOLTAGE <span style=color:#ae81ff>3.3</span> <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>set_property CFGBVS VCCO <span style=color:#66d9ef>[</span>current_design<span style=color:#66d9ef>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Slide Switches
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN A8  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>0<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN C11 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>1<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN C10 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>2<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN A10 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>sw<span style=color:#66d9ef>[</span>3<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Buttons
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN D9  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>btn<span style=color:#66d9ef>[</span>0<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN C9  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>btn<span style=color:#66d9ef>[</span>1<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN B9  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>btn<span style=color:#66d9ef>[</span>2<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN B8  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>btn<span style=color:#66d9ef>[</span>3<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## LEDs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN H5  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>0<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN J5  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>1<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN T9  IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>2<span style=color:#66d9ef>]}];</span>
</span></span><span style=display:flex><span>set_property <span style=color:#f92672>-</span>dict <span style=color:#66d9ef>{</span>PACKAGE_PIN T10 IOSTANDARD LVCMOS33<span style=color:#66d9ef>}</span> <span style=color:#66d9ef>[</span>get_ports <span style=color:#66d9ef>{</span>led<span style=color:#66d9ef>[</span>3<span style=color:#66d9ef>]}];</span>
</span></span></code></pre></div><p>Rerun synthesis, implementation, bitstream generation, and program your board as before.<br><strong><code>SW0</code></strong> and <strong><code>SW1</code></strong> control whether the LEDs are enabled; <strong><code>BTN0</code></strong> selects two different patterns of lights.</p><h2 id=explore>Explore</h2><p>You should put your new skills to use! Create with your own designs using switches, buttons, and LEDs. Just remember that when assigning things they should be the same width; for example, three bits for three LEDs: <code>led[3:1] = 3'b101;</code></p><p>Try answering the following questions:</p><ol><li>How would you test if either button 2 or 3 were pressed?</li><li>What&rsquo;s wrong with the literal <code>4'd20</code>? How could you write it?</li><li>How is a slide switch different from a push button?</li></ol><blockquote><p><strong>Sponsor My Work</strong><br>If you like what I do, consider <a href=https://github.com/sponsors/WillGreen>sponsoring me</a> on GitHub.<br>I love FPGAs and want to help more people discover and use them in their projects.<br>My hardware designs are open source, and my blog is advert free.</p></blockquote><h2 id=whats-next>What&rsquo;s Next?</h2><p>In <a href=/posts/hello-arty-2/>part 2</a>, we move onto clocks, counting, and pulse width modulation (with RGB LEDs thrown in).</p><p>If you&rsquo;re looking for other great resources, try <a href=/recommended-fpga-sites>recommended FPGA sites</a>.</p><p><em>Get in touch with <a href=https://mastodon.social/@WillFlux>@WillFlux</a> or join me on <a href=https://github.com/projf/projf-explore/discussions>GitHub Discussions</a> and <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a>.</em></p></section><footer class="mt-12 flex flex-wrap"><a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/arty-a7>arty-a7</a>
<a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/hello>hello</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 no-underline hover:bg-black/[2%]" href=https://projectf.io/posts/hello-arty-2/><span class=mr-1.5>←</span><span>Hello Arty - Part 2</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 no-underline hover:bg-black/[2%]" href=https://projectf.io/posts/initialize-memory-in-verilog/><span>Initialize Memory in Verilog</span><span class=ml-1.5>→</span></a></nav></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto><a class=link href=https://projectf.io>Project F</a>
&copy; 2023 Will Green.</div></footer></body></html>