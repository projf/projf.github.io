<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#fff lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>2D Shapes - Project F</title><meta name=theme-color><meta name=description content="Welcome back to Exploring FPGA Graphics. In 2D Shapes, we build on what we learned from Lines and Triangles in two ways: drawing new shapes and learning to colour them in. We&rsquo;ll start with rectangles and filled triangles before moving on to circles. These basic shapes make it possible to create a wide variety of graphics and user interfaces.
This post was revised in September 2022. Expect additional explanation in 2023."><meta name=author content="Will Green"><link rel="preload stylesheet" as=style href=https://projectf.io/main.min.css><script defer src=https://projectf.io/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://projectf.io/theme.png><link rel=preload as=image href=https://projectf.io/github.svg><link rel=preload as=image href=https://projectf.io/mastodon.svg><link rel=preload as=image href=https://projectf.io/rss.svg><link rel=icon href=https://projectf.io/favicon.ico><link rel=apple-touch-icon href=https://projectf.io/apple-touch-icon.png><meta name=generator content="Hugo 0.110.0"><script src=https://badgers.projectf.io/script.js data-site=EVCGKVDN defer></script><meta property="og:title" content="2D Shapes"><meta property="og:description" content="Welcome back to Exploring FPGA Graphics. In 2D Shapes, we build on what we learned from Lines and Triangles in two ways: drawing new shapes and learning to colour them in. We&rsquo;ll start with rectangles and filled triangles before moving on to circles. These basic shapes make it possible to create a wide variety of graphics and user interfaces.
This post was revised in September 2022. Expect additional explanation in 2023."><meta property="og:type" content="article"><meta property="og:url" content="https://projectf.io/posts/fpga-shapes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-17T00:00:00+00:00"><meta property="article:modified_time" content="2022-09-11T00:00:00+00:00"><meta itemprop=name content="2D Shapes"><meta itemprop=description content="Welcome back to Exploring FPGA Graphics. In 2D Shapes, we build on what we learned from Lines and Triangles in two ways: drawing new shapes and learning to colour them in. We&rsquo;ll start with rectangles and filled triangles before moving on to circles. These basic shapes make it possible to create a wide variety of graphics and user interfaces.
This post was revised in September 2022. Expect additional explanation in 2023."><meta itemprop=datePublished content="2021-03-17T00:00:00+00:00"><meta itemprop=dateModified content="2022-09-11T00:00:00+00:00"><meta itemprop=wordCount content="2364"><meta itemprop=keywords content="graphics,arty-a7,icebreaker,verilator,"><meta name=twitter:card content="summary"><meta name=twitter:title content="2D Shapes"><meta name=twitter:description content="Welcome back to Exploring FPGA Graphics. In 2D Shapes, we build on what we learned from Lines and Triangles in two ways: drawing new shapes and learning to colour them in. We&rsquo;ll start with rectangles and filled triangles before moving on to circles. These basic shapes make it possible to create a wide variety of graphics and user interfaces.
This post was revised in September 2022. Expect additional explanation in 2023."></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href=https://projectf.io/>Project F</a><div class="btn-dark text-[0] ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#fff"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/about/>About</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/demos/>Demos</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/verilog-lib/>Lib</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tools/>Tools</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/tutorials/>Tutorials</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/projf target=_blank rel=me>github</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./mastodon.svg) href=https://mastodon.social/@WillFlux target=_blank rel=me>mastodon</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://projectf.io/index.xml target=_blank rel=alternate>rss</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-1 dark:prose-invert"><article><header class=mb-1><h1 class="!my-0 pb-2.5">2D Shapes</h1><div class="text-sm opacity-60">Published
<time>17 Mar 2021</time>
<span class=mx-1>&#183;</span>
<span>Updated
<time>11 Sep 2022</time></span></div></header><section><p>Welcome back to Exploring FPGA Graphics. In 2D Shapes, we build on what we learned from <a href=/posts/lines-and-triangles/>Lines and Triangles</a> in two ways: drawing new shapes and learning to colour them in. We&rsquo;ll start with rectangles and filled triangles before moving on to circles. These basic shapes make it possible to create a wide variety of graphics and user interfaces.</p><p><strong>This post was revised in September 2022. Expect additional explanation in 2023.</strong></p><p>In this series, we learn about graphics at the hardware level and get a feel for the power of FPGAs. We&rsquo;ll learn how screens work, play Pong, create starfields and sprites, paint Michelangelo&rsquo;s David, draw lines and triangles, and animate characters and shapes. New to the series? Start with <a href=/posts/fpga-graphics/>Beginning FPGA Graphics</a>.</p><p><em>Get in touch with <a href=https://mastodon.social/@WillFlux>@WillFlux</a> or join me on <a href=https://github.com/projf/projf-explore/discussions>GitHub Discussions</a> and <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a>.</em></p><p><img src=/img/posts/fpga-shapes/banner.png alt title></p><h3 id=series-outline>Series Outline</h3><ul><li><a href=/posts/fpga-graphics/>Beginning FPGA Graphics</a> - video signals and basic graphics</li><li><a href=/posts/racing-the-beam/>Racing the Beam</a> - simple demo effects with minimal logic</li><li><a href=/posts/fpga-pong/>FPGA Pong</a> - recreate the classic arcade on an FPGA</li><li><a href=/posts/display-signals/>Display Signals</a> - revisit display signals and meet colour palettes</li><li><a href=/posts/hardware-sprites/>Hardware Sprites</a> - fast, colourful graphics for games</li><li><a href=/posts/framebuffers/>Framebuffers</a> - bitmap graphics featuring Michelangelo&rsquo;s David</li><li><a href=/posts/lines-and-triangles/>Lines and Triangles</a> - drawing lines and triangles</li><li>2D Shapes (this post) - filled shapes and simple pictures</li><li><a href=/posts/animated-shapes/>Animated Shapes</a> - animation and double-buffering</li></ul><blockquote><p><strong>Sponsor My Work</strong><br>If you like what I do, consider <a href=https://github.com/sponsors/WillGreen>sponsoring me</a> on GitHub.<br>I love FPGAs and want to help more people discover and use them in their projects.<br>My hardware designs are open source, and my blog is advert free.</p></blockquote><h3 id=requirements>Requirements</h3><p>You should be to run these designs on any recent FPGA board. I include everything you need for the <a href=https://docs.icebreaker-fpga.org/hardware/icebreaker/>iCEBreaker</a> with <a href=https://docs.icebreaker-fpga.org/hardware/pmod/dvi/>12-Bit DVI Pmod</a>, <a href=https://digilent.com/reference/programmable-logic/arty-a7/reference-manual>Digilent Arty A7-35T</a> with <a href=https://digilent.com/reference/pmod/pmodvga/reference-manual>Pmod VGA</a>, and <a href=/posts/verilog-sim-verilator-sdl/>Verilator Simulation with SDL</a>. See <a href=/posts/fpga-graphics/#requirements>requirements</a> from <em>Beginning FPGA Graphics</em> for more details.</p><h2 id=the-rectangle>The Rectangle</h2><p>Let&rsquo;s kick things off by creating a module for rectangle drawing; this is similar to the <a href=/posts/lines-and-triangles/#the-triangle>triangle</a> and provides a helpful stepping stone to drawing filled shapes.</p><ul><li>Rectangle rasterization: <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_rectangle.sv>draw_rectangle.sv</a></strong></li><li>Test bench for rectangle (Vivado): <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/xc7/draw_rectangle_tb.sv>xc7/draw_rectangle_tb.sv</a></strong>.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> draw_rectangle #(<span style=color:#66d9ef>parameter</span> CORDW<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span>) (  <span style=color:#75715e>// signed coordinate width
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> clk,             <span style=color:#75715e>// clock
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> rst,             <span style=color:#75715e>// reset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> start,           <span style=color:#75715e>// start rectangle drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> oe,              <span style=color:#75715e>// output enable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0, y0,  <span style=color:#75715e>// vertex 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x1, y1,  <span style=color:#75715e>// vertex 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x,  y,   <span style=color:#75715e>// drawing position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> drawing,         <span style=color:#75715e>// actively drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> busy,            <span style=color:#75715e>// drawing request in progress
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> done             <span style=color:#75715e>// drawing is complete (high for one tick)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] line_id;  <span style=color:#75715e>// current line (0, 1, 2, or 3)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> line_start;     <span style=color:#75715e>// start drawing line
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> line_done;      <span style=color:#75715e>// finished drawing current line?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// current line coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] lx0, ly0;  <span style=color:#75715e>// point 0 position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] lx1, ly1;  <span style=color:#75715e>// point 1 position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// draw state machine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>enum</span> {IDLE, INIT, DRAW} state;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_ff</span> @(<span style=color:#66d9ef>posedge</span> clk) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> (state)
</span></span><span style=display:flex><span>            INIT: <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// register coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                state <span style=color:#f92672>&lt;=</span> DRAW;
</span></span><span style=display:flex><span>                line_start <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (line_id <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;d0</span>) <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// (x0,y0) (x1,y0)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    lx0 <span style=color:#f92672>&lt;=</span> x0; ly0 <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                    lx1 <span style=color:#f92672>&lt;=</span> x1; ly1 <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (line_id <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;d1</span>) <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// (x1,y0) (x1,y1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    lx0 <span style=color:#f92672>&lt;=</span> x1; ly0 <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                    lx1 <span style=color:#f92672>&lt;=</span> x1; ly1 <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (line_id <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span><span style=color:#ae81ff>&#39;d2</span>) <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// (x1,y1) (x0,y1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    lx0 <span style=color:#f92672>&lt;=</span> x1; ly0 <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                    lx1 <span style=color:#f92672>&lt;=</span> x0; ly1 <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// (x0,y1) (x0,y0)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    lx0 <span style=color:#f92672>&lt;=</span> x0; ly0 <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                    lx1 <span style=color:#f92672>&lt;=</span> x0; ly1 <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            DRAW: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                line_start <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (line_done) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (line_id <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span>) <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// final line
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                        state <span style=color:#f92672>&lt;=</span> IDLE;
</span></span><span style=display:flex><span>                        busy <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                        done <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                        state <span style=color:#f92672>&lt;=</span> INIT;
</span></span><span style=display:flex><span>                        line_id <span style=color:#f92672>&lt;=</span> line_id <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// IDLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                done <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (start) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    state <span style=color:#f92672>&lt;=</span> INIT;
</span></span><span style=display:flex><span>                    line_id <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                    busy <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>endcase</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (rst) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            state <span style=color:#f92672>&lt;=</span> IDLE;
</span></span><span style=display:flex><span>            line_id <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            line_start <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            busy <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            done <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    draw_line #(.CORDW(CORDW)) draw_line_inst (
</span></span><span style=display:flex><span>        .clk,
</span></span><span style=display:flex><span>        .rst,
</span></span><span style=display:flex><span>        .start(line_start),
</span></span><span style=display:flex><span>        .oe,
</span></span><span style=display:flex><span>        .x0(lx0),
</span></span><span style=display:flex><span>        .y0(ly0),
</span></span><span style=display:flex><span>        .x1(lx1),
</span></span><span style=display:flex><span>        .y1(ly1),
</span></span><span style=display:flex><span>        .x,
</span></span><span style=display:flex><span>        .y,
</span></span><span style=display:flex><span>        .drawing,
</span></span><span style=display:flex><span>        .busy(),
</span></span><span style=display:flex><span>        .done(line_done)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>This module has similar I/O and state machine to <code>draw_triangle</code>: we draw one line for each of the four edges. A rectangle only needs two pairs of coordinates to define it: the top left and bottom right.</p><p>To demo our rectangle drawing, we will draw a series of rectangles inside each other using every colour in the palette:</p><ul><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/160x90/render_rects.sv>160x90/render_rects.sv</a></strong></li><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/320x180/render_rects.sv>320x180/render_rects.sv</a></strong></li></ul><p>There are two different rendering modules to support different FPGAs. The 320x180 version has sixteen colours, while the 160x90 version has four; see <a href=/posts/lines-and-triangles/>Lines and Triangles</a> for an explanation.</p><p>The 16-colour 320x180 version is shown below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> render_rects #(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>parameter</span> CORDW<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span>,  <span style=color:#75715e>// signed coordinate width (bits)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>parameter</span> CIDXW<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>,   <span style=color:#75715e>// colour index width (bits)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>parameter</span> SCALE<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>    <span style=color:#75715e>// drawing scale: 1=320x180, 2=640x360, 4=1280x720
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    ) (  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> clk,    <span style=color:#75715e>// clock
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> rst,    <span style=color:#75715e>// reset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> oe,     <span style=color:#75715e>// output enable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> start,  <span style=color:#75715e>// start drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x,  <span style=color:#75715e>// horizontal draw position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] y,  <span style=color:#75715e>// vertical draw position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> [CIDXW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] cidx,  <span style=color:#75715e>// pixel colour
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> drawing,  <span style=color:#75715e>// actively drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> done      <span style=color:#75715e>// drawing is complete (high for one tick)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>localparam</span> SHAPE_CNT<span style=color:#f92672>=</span><span style=color:#ae81ff>64</span>;  <span style=color:#75715e>// number of shapes to draw
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> [$clog2(SHAPE_CNT)<span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] shape_id;  <span style=color:#75715e>// shape identifier
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] vx0, vy0, vx1, vy1;  <span style=color:#75715e>// shape coords
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> draw_start, draw_done;  <span style=color:#75715e>// drawing signals
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// draw state machine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>enum</span> {IDLE, INIT, DRAW, DONE} state;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_ff</span> @(<span style=color:#66d9ef>posedge</span> clk) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> (state)
</span></span><span style=display:flex><span>            INIT: <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// register coordinates and colour
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                draw_start <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> DRAW;
</span></span><span style=display:flex><span>                vx0 <span style=color:#f92672>&lt;=</span>  <span style=color:#ae81ff>60</span> <span style=color:#f92672>+</span> shape_id;
</span></span><span style=display:flex><span>                vy0 <span style=color:#f92672>&lt;=</span>  <span style=color:#ae81ff>20</span> <span style=color:#f92672>+</span> shape_id;
</span></span><span style=display:flex><span>                vx1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>260</span> <span style=color:#f92672>-</span> shape_id;
</span></span><span style=display:flex><span>                vy1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>160</span> <span style=color:#f92672>-</span> shape_id;
</span></span><span style=display:flex><span>                cidx <span style=color:#f92672>&lt;=</span> shape_id[<span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>];  <span style=color:#75715e>// use lowest four bits for colour
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            DRAW: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                draw_start <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (draw_done) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (shape_id <span style=color:#f92672>==</span> SHAPE_CNT<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                        state <span style=color:#f92672>&lt;=</span> DONE;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                        shape_id <span style=color:#f92672>&lt;=</span> shape_id <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                        state <span style=color:#f92672>&lt;=</span> INIT;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            DONE: state <span style=color:#f92672>&lt;=</span> DONE;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>if</span> (start) state <span style=color:#f92672>&lt;=</span> INIT;  <span style=color:#75715e>// IDLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>endcase</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (rst) state <span style=color:#f92672>&lt;=</span> IDLE;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    draw_rectangle #(.CORDW(CORDW)) draw_rectangle_inst (
</span></span><span style=display:flex><span>        .clk,
</span></span><span style=display:flex><span>        .rst,
</span></span><span style=display:flex><span>        .start(draw_start),
</span></span><span style=display:flex><span>        .oe,
</span></span><span style=display:flex><span>        .x0(vx0 <span style=color:#f92672>*</span> SCALE),
</span></span><span style=display:flex><span>        .y0(vy0 <span style=color:#f92672>*</span> SCALE),
</span></span><span style=display:flex><span>        .x1(vx1 <span style=color:#f92672>*</span> SCALE),
</span></span><span style=display:flex><span>        .y1(vy1 <span style=color:#f92672>*</span> SCALE),
</span></span><span style=display:flex><span>        .x,
</span></span><span style=display:flex><span>        .y,
</span></span><span style=display:flex><span>        .drawing,
</span></span><span style=display:flex><span>        .busy(),
</span></span><span style=display:flex><span>        .done(draw_done)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> done <span style=color:#f92672>=</span> (state <span style=color:#f92672>==</span> DONE);
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>We then dust off our old <code>top_demo</code> module from last time with one minor change (see below):</p><ul><li>Arty (XC7): <strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/xc7/top_demo.sv>xc7/top_demo.sv</a></strong></li><li>iCEBreaker (iCE40): <strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/ice40/top_demo.sv>ice40/top_demo.sv</a></strong></li><li>Verilator Sim: <strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/sim/top_demo.sv>sim/top_demo.sv</a></strong></li></ul><blockquote><p><strong>Building the Designs</strong><br>In the <a href=https://github.com/projf/projf-explore/tree/main/graphics/2d-shapes>2D Shapes</a> section of the git repo, you&rsquo;ll find the design files, a makefile for iCEBreaker and Verilator, and a Vivado project for Arty. There are also build instructions for boards and simulations.</p></blockquote><p>You should see something like this (the iCEBreaker version has only four colours):</p><p><img src=/img/posts/fpga-shapes/rects.png alt="Rectangles Verilator simulation" title="A nest of rectangles."></p><h3 id=speed-up>Speed Up</h3><p>Now we&rsquo;re drawing many pixels, we&rsquo;ve increased drawing speed from one to 480 pixels per frame by drawing every 640x480 screen line using <code>line_sys</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span>    <span style=color:#75715e>// reduce drawing speed to make process visible
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>localparam</span> FRAME_WAIT <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>;  <span style=color:#75715e>// wait this many frames to start drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> [$clog2(FRAME_WAIT)<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] cnt_frame_wait;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> draw_oe;  <span style=color:#75715e>// draw requested
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>always_ff</span> @(<span style=color:#66d9ef>posedge</span> clk_sys) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        draw_oe <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;  <span style=color:#75715e>// comment out to draw at full speed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (cnt_frame_wait <span style=color:#f92672>!=</span> FRAME_WAIT<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// wait for initial frames
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> (frame_sys) cnt_frame_wait <span style=color:#f92672>&lt;=</span> cnt_frame_wait <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (line_sys) draw_oe <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;  <span style=color:#75715e>// every screen line
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>end</span>
</span></span></code></pre></div><h2 id=colouring-in>Colouring In</h2><p>A rectangle is the simplest shape to fill: we draw a series of horizontal lines of the same length. We could use our existing <code>draw_line</code> module to do this, but a simpler approach has advantages. By restricting line drawing to one dimension and left-to-right, we can take advantage of sequential memory access, vital for dynamic memory (SDRAM, DDR, PSRAM) performance.</p><ul><li>Filled rectangle rasterization: <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_rectangle_fill.sv>draw_rectangle_fill.sv</a></strong></li><li>1D line drawing: <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_line_1d.sv>draw_line_1d.sv</a></strong>.</li><li>Test bench for 1D line (Vivado): <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/xc7/draw_line_1d_tb.sv>xc7/draw_line_1d_tb.sv</a></strong>.</li></ul><p>And we have new render modules to demo filled rectangles:</p><ul><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/160x90/render_rects_fill.sv>160x90/render_rects_fill.sv</a></strong></li><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/320x180/render_rects_fill.sv>320x180/render_rects_fill.sv</a></strong></li></ul><p>Replace replace <code>render_*</code> with <code>render_rect_fill</code> in your top module and rebuild.</p><p><img src=/img/posts/fpga-shapes/rects_fill.png alt="Filled rectangles Verilator simulation" title="A stack of squares."></p><h1 id=filled-triangle>Filled Triangle</h1><p>A filled triangle requires more thought than a rectangle. There are several different approaches; for example, barycentric coordinates can render many pixels in parallel on a modern GPU. We&rsquo;ll stick with Bresenham&rsquo;s algorithm, as it&rsquo;s light on FPGA resources and can still draw over a million small triangles per second on Arty at 125 MHz (a sample 36-pixel triangle requires 97 clock cycles).</p><p>We use Bresenham to determine the triangle edges and then join them with a horizontal line. First, we sort the vertices, so we always draw down the screen, and then we split the triangle into two flat triangles.</p><p><em>Details of algorithm to follow.</em></p><p>Filled triangle rasterization - <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_triangle_fill.sv>draw_triangle_fill.sv</a></strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#66d9ef>module</span> draw_triangle_fill #(<span style=color:#66d9ef>parameter</span> CORDW<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span>) (  <span style=color:#75715e>// signed coordinate width
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> clk,             <span style=color:#75715e>// clock
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> rst,             <span style=color:#75715e>// reset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> start,           <span style=color:#75715e>// start triangle drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> oe,              <span style=color:#75715e>// output enable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0, y0,  <span style=color:#75715e>// vertex 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x1, y1,  <span style=color:#75715e>// vertex 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>input</span>  <span style=color:#66d9ef>wire</span> <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x2, y2,  <span style=color:#75715e>// vertex 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x,  y,   <span style=color:#75715e>// drawing position
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> drawing,         <span style=color:#75715e>// actively drawing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> busy,            <span style=color:#75715e>// drawing request in progress
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>output</span>      <span style=color:#66d9ef>logic</span> done             <span style=color:#75715e>// drawing is complete (high for one tick)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// sorted input vertices
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0s, y0s, x1s, y1s, x2s, y2s;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// line coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0a, y0a, x1a, y1a, xa, ya;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0b, y0b, x1b, y1b, xb, yb;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] x0h, x1h, xh;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// previous y-value for edges
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] prev_y;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// previous x-values for horizontal line
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] prev_xa;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> <span style=color:#66d9ef>signed</span> [CORDW<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span>] prev_xb;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// line control signals
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> oe_a, oe_b, oe_h;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> drawing_h;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> busy_a, busy_b, busy_h;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>logic</span> b_edge;  <span style=color:#75715e>// which B edge are we drawing?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// pipeline completion signals to match coordinates
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>logic</span> busy_p1, done_p1;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// draw state machine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>enum</span> {IDLE, SORT_0, SORT_1, SORT_2, INIT_A, INIT_B0, INIT_B1, INIT_H,
</span></span><span style=display:flex><span>            START_A, START_B, START_H, EDGE, H_LINE, DONE} state;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_ff</span> @(<span style=color:#66d9ef>posedge</span> clk) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> (state)
</span></span><span style=display:flex><span>            SORT_0: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> SORT_1;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (y0 <span style=color:#f92672>&gt;</span> y2) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    x0s <span style=color:#f92672>&lt;=</span> x2;
</span></span><span style=display:flex><span>                    y0s <span style=color:#f92672>&lt;=</span> y2;
</span></span><span style=display:flex><span>                    x2s <span style=color:#f92672>&lt;=</span> x0;
</span></span><span style=display:flex><span>                    y2s <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    x0s <span style=color:#f92672>&lt;=</span> x0;
</span></span><span style=display:flex><span>                    y0s <span style=color:#f92672>&lt;=</span> y0;
</span></span><span style=display:flex><span>                    x2s <span style=color:#f92672>&lt;=</span> x2;
</span></span><span style=display:flex><span>                    y2s <span style=color:#f92672>&lt;=</span> y2;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            SORT_1: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> SORT_2;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (y0s <span style=color:#f92672>&gt;</span> y1) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    x0s <span style=color:#f92672>&lt;=</span> x1;
</span></span><span style=display:flex><span>                    y0s <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                    x1s <span style=color:#f92672>&lt;=</span> x0s;
</span></span><span style=display:flex><span>                    y1s <span style=color:#f92672>&lt;=</span> y0s;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    x1s <span style=color:#f92672>&lt;=</span> x1;
</span></span><span style=display:flex><span>                    y1s <span style=color:#f92672>&lt;=</span> y1;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            SORT_2: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> INIT_A;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (y1s <span style=color:#f92672>&gt;</span> y2s) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    x1s <span style=color:#f92672>&lt;=</span> x2s;
</span></span><span style=display:flex><span>                    y1s <span style=color:#f92672>&lt;=</span> y2s;
</span></span><span style=display:flex><span>                    x2s <span style=color:#f92672>&lt;=</span> x1s;
</span></span><span style=display:flex><span>                    y2s <span style=color:#f92672>&lt;=</span> y1s;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            INIT_A: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> INIT_B0;
</span></span><span style=display:flex><span>                x0a <span style=color:#f92672>&lt;=</span> x0s;
</span></span><span style=display:flex><span>                y0a <span style=color:#f92672>&lt;=</span> y0s;
</span></span><span style=display:flex><span>                x1a <span style=color:#f92672>&lt;=</span> x2s;
</span></span><span style=display:flex><span>                y1a <span style=color:#f92672>&lt;=</span> y2s;
</span></span><span style=display:flex><span>                prev_xa <span style=color:#f92672>&lt;=</span> x0s;
</span></span><span style=display:flex><span>                prev_xb <span style=color:#f92672>&lt;=</span> x0s;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            INIT_B0: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> START_A;
</span></span><span style=display:flex><span>                b_edge <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>                x0b <span style=color:#f92672>&lt;=</span> x0s;
</span></span><span style=display:flex><span>                y0b <span style=color:#f92672>&lt;=</span> y0s;
</span></span><span style=display:flex><span>                x1b <span style=color:#f92672>&lt;=</span> x1s;
</span></span><span style=display:flex><span>                y1b <span style=color:#f92672>&lt;=</span> y1s;
</span></span><span style=display:flex><span>                prev_y <span style=color:#f92672>&lt;=</span> y0s;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            INIT_B1: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> START_B;  <span style=color:#75715e>// we don&#39;t need to start A again
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                b_edge <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                x0b <span style=color:#f92672>&lt;=</span> x1s;
</span></span><span style=display:flex><span>                y0b <span style=color:#f92672>&lt;=</span> y1s;
</span></span><span style=display:flex><span>                x1b <span style=color:#f92672>&lt;=</span> x2s;
</span></span><span style=display:flex><span>                y1b <span style=color:#f92672>&lt;=</span> y2s;
</span></span><span style=display:flex><span>                prev_y <span style=color:#f92672>&lt;=</span> y1s;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            START_A: state <span style=color:#f92672>&lt;=</span> START_B;
</span></span><span style=display:flex><span>            START_B: state <span style=color:#f92672>&lt;=</span> EDGE;
</span></span><span style=display:flex><span>            EDGE: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> ((ya <span style=color:#f92672>!=</span> prev_y <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>busy_a) <span style=color:#f92672>&amp;&amp;</span> (yb <span style=color:#f92672>!=</span> prev_y <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>busy_b)) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    state <span style=color:#f92672>&lt;=</span> START_H;
</span></span><span style=display:flex><span>                    x0h <span style=color:#f92672>&lt;=</span> (prev_xa <span style=color:#f92672>&gt;</span> prev_xb) <span style=color:#f92672>?</span> prev_xb <span style=color:#f92672>:</span> prev_xa;  <span style=color:#75715e>// always draw...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    x1h <span style=color:#f92672>&lt;=</span> (prev_xa <span style=color:#f92672>&gt;</span> prev_xb) <span style=color:#f92672>?</span> prev_xa <span style=color:#f92672>:</span> prev_xb;  <span style=color:#75715e>// left to right
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            START_H: state <span style=color:#f92672>&lt;=</span> H_LINE;
</span></span><span style=display:flex><span>            H_LINE: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>busy_h) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    prev_y <span style=color:#f92672>&lt;=</span> yb;  <span style=color:#75715e>// safe to update previous values once h-line done
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    prev_xa <span style=color:#f92672>&lt;=</span> xa;
</span></span><span style=display:flex><span>                    prev_xb <span style=color:#f92672>&lt;=</span> xb;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>busy_b) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                        state <span style=color:#f92672>&lt;=</span> (busy_a <span style=color:#f92672>&amp;&amp;</span> b_edge <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>?</span> INIT_B1 <span style=color:#f92672>:</span> DONE;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>end</span> <span style=color:#66d9ef>else</span> state <span style=color:#f92672>&lt;=</span> EDGE;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            DONE: <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                state <span style=color:#f92672>&lt;=</span> IDLE;
</span></span><span style=display:flex><span>                done_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                busy_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>begin</span>  <span style=color:#75715e>// IDLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (start) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>                    state <span style=color:#f92672>&lt;=</span> SORT_0;
</span></span><span style=display:flex><span>                    busy_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>                done_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>endcase</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (rst) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>            state <span style=color:#f92672>&lt;=</span> IDLE;
</span></span><span style=display:flex><span>            busy_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            done_p1 <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            b_edge <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>always_comb</span> <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        oe_a <span style=color:#f92672>=</span> (state <span style=color:#f92672>==</span> EDGE <span style=color:#f92672>&amp;&amp;</span> ya <span style=color:#f92672>==</span> prev_y);
</span></span><span style=display:flex><span>        oe_b <span style=color:#f92672>=</span> (state <span style=color:#f92672>==</span> EDGE <span style=color:#f92672>&amp;&amp;</span> yb <span style=color:#f92672>==</span> prev_y);
</span></span><span style=display:flex><span>        oe_h <span style=color:#f92672>=</span> oe;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// register output
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>always_ff</span> @(<span style=color:#66d9ef>posedge</span> clk) <span style=color:#66d9ef>begin</span>
</span></span><span style=display:flex><span>        x <span style=color:#f92672>&lt;=</span> xh;
</span></span><span style=display:flex><span>        y <span style=color:#f92672>&lt;=</span> prev_y;
</span></span><span style=display:flex><span>        drawing <span style=color:#f92672>&lt;=</span> drawing_h;
</span></span><span style=display:flex><span>        busy <span style=color:#f92672>&lt;=</span> busy_p1;
</span></span><span style=display:flex><span>        done <span style=color:#f92672>&lt;=</span> done_p1;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    draw_line #(.CORDW(CORDW)) draw_edge_a (
</span></span><span style=display:flex><span>        .clk,
</span></span><span style=display:flex><span>        .rst,
</span></span><span style=display:flex><span>        .start(state <span style=color:#f92672>==</span> START_A),
</span></span><span style=display:flex><span>        .oe(oe_a),
</span></span><span style=display:flex><span>        .x0(x0a),
</span></span><span style=display:flex><span>        .y0(y0a),
</span></span><span style=display:flex><span>        .x1(x1a),
</span></span><span style=display:flex><span>        .y1(y1a),
</span></span><span style=display:flex><span>        .x(xa),
</span></span><span style=display:flex><span>        .y(ya),
</span></span><span style=display:flex><span>        .drawing(),
</span></span><span style=display:flex><span>        .busy(busy_a),
</span></span><span style=display:flex><span>        .done()
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    draw_line #(.CORDW(CORDW)) draw_edge_b (
</span></span><span style=display:flex><span>        .clk,
</span></span><span style=display:flex><span>        .rst,
</span></span><span style=display:flex><span>        .start(state <span style=color:#f92672>==</span> START_B),
</span></span><span style=display:flex><span>        .oe(oe_b),
</span></span><span style=display:flex><span>        .x0(x0b),
</span></span><span style=display:flex><span>        .y0(y0b),
</span></span><span style=display:flex><span>        .x1(x1b),
</span></span><span style=display:flex><span>        .y1(y1b),
</span></span><span style=display:flex><span>        .x(xb),
</span></span><span style=display:flex><span>        .y(yb),
</span></span><span style=display:flex><span>        .drawing(),
</span></span><span style=display:flex><span>        .busy(busy_b),
</span></span><span style=display:flex><span>        .done()
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    draw_line_1d #(.CORDW(CORDW)) draw_h_line (
</span></span><span style=display:flex><span>        .clk,
</span></span><span style=display:flex><span>        .rst,
</span></span><span style=display:flex><span>        .start(state <span style=color:#f92672>==</span> START_H),
</span></span><span style=display:flex><span>        .oe(oe_h),
</span></span><span style=display:flex><span>        .x0(x0h),
</span></span><span style=display:flex><span>        .x1(x1h),
</span></span><span style=display:flex><span>        .x(xh),
</span></span><span style=display:flex><span>        .drawing(drawing_h),
</span></span><span style=display:flex><span>        .busy(busy_h),
</span></span><span style=display:flex><span>        .done()
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span><span style=color:#66d9ef>endmodule</span>
</span></span></code></pre></div><p>I&rsquo;ve created two demo modules for filled triangles. The first draw three triangles:</p><ul><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/160x90/render_triangles_fill.sv>160x90/render_triangles_fill.sv</a></strong></li><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/320x180/render_triangles_fill.sv>320x180/render_triangles_fill.sv</a></strong></li></ul><p>Replace replace <code>render_*</code> with <code>render_triangles_fill</code> in your top module and rebuild.</p><p><img src=/img/posts/fpga-shapes/triangles_fill.png alt="Filled triangles Verilator simulation" title="Three filled triangles."></p><p>The second demo creates a filled cube with six triangles:</p><ul><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/160x90/render_cube_fill.sv>160x90/render_cube_fill.sv</a></strong></li><li><strong><a href=https://github.com/projf/projf-explore/blob/main/graphics/2d-shapes/320x180/render_cube_fill.sv>320x180/render_cube_fill.sv</a></strong></li></ul><p>Replace replace <code>render_*</code> with <code>render_cube_fill</code> in your top module and rebuild.</p><p><img src=/img/posts/fpga-shapes/cube_fill.png alt="Filled cube Verilator simulation" title="Six triangles make a cube."></p><blockquote><p><strong>Shared Responsibility</strong><br>When two triangles share an edge, we must decide which triangle draws that edge.
The standard approach is to draw the top and left edges, but we won&rsquo;t don&rsquo;t handle this just yet.</p></blockquote><h2 id=circles>Circles</h2><p>Circles are surprisingly straightforward to draw. I&rsquo;ve based my designs on the algorithm from <a href=http://members.chello.at/~easyfilter/bresenham.html>The Beauty of Bresenham&rsquo;s Algorithm</a>, which requires neither multiplication nor division.</p><p><em>Algorithm details to follow.</em></p><ul><li>Circle rasterization - <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_circle.sv>draw_circle.sv</a></strong></li><li>Filled circle rasterization - <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/draw_circle_fill.sv>draw_circle_fill.sv</a></strong></li><li>Test bench for circle (Vivado): <strong><a href=https://github.com/projf/projf-explore/blob/main/lib/graphics/xc7/draw_circle_tb.sv>xc7/draw_circle_tb.sv</a></strong>.</li></ul><p>Replace replace <code>render_*</code> with <code>render_circles</code> in your top module and rebuild.</p><p><img src=/img/posts/fpga-shapes/circles.png alt="Circles Verilator simulation" title="Concentric circles."></p><p>Replace replace <code>render_*</code> with <code>render_circles_fill</code> in your top module and rebuild.</p><p>In the simulation, you should see this:</p><p><img src=/img/posts/fpga-shapes/circles_fill.png alt="Filled circles Verilator simulation" title="Rainbow in the round."></p><p>On the iCEBreaker, you should see something like this (four colour):</p><p><img src=/img/posts/fpga-shapes/circles_fill_icebreaker.jpeg alt="Filled circles iCEBreaker board" title="Concentric circles."></p><h2 id=explore>Explore</h2><p>I hope you enjoyed this instalment of <em>Exploring FPGA Graphics</em>, but nothing beats creating your own designs. Here are a few suggestions to get you started:</p><ul><li>Draw a filled hexagon using filled triangles</li><li>Draw a pair of eyes using only circles</li><li>Check out the <a href=/posts/castle-drawing/>Castle Drawing Demo</a>, which combines multiple shapes</li><li>Recreate the Pink Floyd album cover for <a href=https://en.wikipedia.org/wiki/The_Dark_Side_of_the_Moon>The Dark Side of the Moon</a></li></ul><h2 id=next-time>Next Time</h2><p>Next time, we&rsquo;ll be moving around with <a href=/posts/animated-shapes/>Animated Shapes</a>. Check out the <a href=/demos/>demo</a> and <a href=/tutorials/>tutorial</a> sections for more FPGA projects.</p><p><em>Get in touch with <a href=https://mastodon.social/@WillFlux>@WillFlux</a> or join me on <a href=https://github.com/projf/projf-explore/discussions>GitHub Discussions</a> and <a href=https://discord.gg/cf869yDbXf>1BitSquared Discord</a>.</em></p></section><footer class="mt-12 flex flex-wrap"><a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/graphics>graphics</a>
<a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/arty-a7>arty-a7</a>
<a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/icebreaker>icebreaker</a>
<a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href=https://projectf.io/tags/verilator>verilator</a></footer><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 no-underline hover:bg-black/[2%]" href=https://projectf.io/posts/verilog-library-announcement/><span class=mr-1.5>←</span><span>Project F Verilog Library</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 no-underline hover:bg-black/[2%]" href=https://projectf.io/posts/hello-nexys-2/><span>Hello Nexys - Part 2</span><span class=ml-1.5>→</span></a></nav></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto><a class=link href=https://projectf.io>Project F</a>
&copy; 2023 Will Green.</div></footer></body></html>